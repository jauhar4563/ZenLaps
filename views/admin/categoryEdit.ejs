<%- include('../Layouts/adminHeader.ejs') %>

<form action="" method="post" enctype="multipart/form-data" onsubmit="return validateCategoryForm()">

        <section class="content-main">
            <div class="row">
                <div class="col-9">
                    <div class="content-header">
                        <h2 class="content-title">Add New Category</h2>
                        
   

                    </div>
                </div>
                <div class="col-lg-6">
                  
                    <div class="card mb-4">
                       
                        <div class="card-header">
                            <h4>Basic</h4>
                        </div>
                        <input type="hidden" value="<%= category._id %>" name="category_id">
                        <div class="card-body">
                                <div class="mb-4">
                                    <label for="product_name" class="form-label">Product title</label>
                                    <input type="text"  name="name" placeholder="Type here" value="<%= category.name %>" id="category_name" class="form-control" >
                                    <div class="error-message" style="color: red;" id="category_name-error"></div>

                                </div>
                                <div class="mb-4">
                                    <label class="form-label">Full description</label>
                                    <textarea  name="description" placeholder="Type here" class="form-control" id="description" rows="4"><%= category.description %></textarea>
                                    <div class="error-message" style="color: red;" id="description-error"></div>

                                </div>
                               
                               
                            
                        </div>
                    </div> <!-- card end// -->
                    
                </div>
                <div class="col-lg-3">
                    <div class="card mb-4">
                        <div class="card-header">
                            <h4>Picture</h4>
                        </div>
                        <div class="card-body">
                            <div class="input-upload">
                                <img id="image-preview" src="../../Public/categoryImages/<%= category.image %>" alt="">
                                <input class="form-control" value="<%= category.image %>" type="file" id="category_image" name="image" accept="image/*">
                            </div>
                        </div>
                    </div> <!-- card end// -->
                    
                    <div>
                        <a href="/admin/categoryList">                        <button class="btn btn-light rounded font-sm mr-5 text-body hover-up">Save to draft</button>
                        </a>
                        <input type="submit"  value="submit" class="btn btn-md rounded font-sm hover-up" >
                    </div>
                
                    <div id="invalid">
                        <% if (typeof error !== 'undefined' && error) { %>
                            <p style="color: rgb(144, 5, 5);" id="message"><%= error %></p>
                        <% } %>
                                </div>  
                    </div> 
                    <div id="invalid">
                        <% if (typeof message !== 'undefined' && message) { %>
                            <p style="color: rgb(8, 96, 0);" id="message"><%= message %></p>
                        <% } %>
                                </div> 
                 
                </div> <script>
                    const imagePreview = document.getElementById('image-preview');
                    const categoryImageInput = document.getElementById('category_image');
                    
                    categoryImageInput.addEventListener('change', function() {
                      if (this.files && this.files[0]) {
                        const reader = new FileReader();
                    
                        reader.onload = function(e) {
                          imagePreview.src = e.target.result;
                        };
                    
                        reader.readAsDataURL(this.files[0]);
                      } else {
                        imagePreview.src = "../../Public/adminAssets/imgs/theme/upload.svg";
                      }
                    });
                    
                    </script>
                </div>
          

      
        </section> <!-- content-main end// -->
    </form>

        
        
    <%- include('../Layouts/adminFooter.ejs') %>
