<%- include('../Layouts/header.ejs') %>
<main class="main">
    <div class="page-header text-center" style="background-image: url('../../Public/assets/images/userProfile/andras-vas-Bd7gNnWJBkU-unsplash.jpg')">
        <div class="container">
            <h1 class="page-title" style="color: white;">My Account<span>Shop</span></h1>
        </div><!-- End .container -->
    </div><!-- End .page-header -->
   
    <div class="page-content mt-4">
        <div class="dashboard">
            <div class="container">
                <div class="row">
                    <aside class="col-md-4 col-lg-2">
                        <ul class="nav nav-dashboard flex-column mb-3 mb-md-0" role="tablist">
                            <li class="nav-item">
                                <a class="nav-link active" id="" data-toggle="tab" href="" role="tab" aria-controls="tab-dashboard" aria-selected="true">Dashboard</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link"  href="/userProfile"  aria-selected="false">Account Details</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link"  href="/wallet"  aria-selected="false">Wallet</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link"  href="/coupons"  aria-selected="false">Coupons</a>
                            </li>
                      
                            <li class="nav-item">
                              <a class="nav-link"  href="/orderHistory"  aria-selected="false">Order History</a>
                          </li>
                         
                            <li class="nav-item">
                                <a class="nav-link" href="/userAddress"  aria-selected="false">Adresses</a>
                            </li>
                           
                            <li class="nav-item">
                                <a class="nav-link" href="/logout">Sign Out</a>
                            </li>
                        </ul>
                    </aside><!-- End .col-lg-3 -->

                    <div class="col-md-8 col-lg-10">
                        <div class="tab-content">
                            <div class="tab-pane fade show active" id="tab-dashboard" role="tabpanel" aria-labelledby="tab-dashboard-link">
                                <p>Hello <span class="font-weight-normal text-dark">User</span> (not <span class="font-weight-normal text-dark">User</span>? <a href="#">Log out</a>) 
                                <br>
                                From your account dashboard you can view your <a href="#tab-orders" class="tab-trigger-link link-underline">recent orders</a>, manage your <a href="#tab-address" class="tab-trigger-link">shipping and billing addresses</a>, and <a href="#tab-account" class="tab-trigger-link">edit your password and account details</a>.</p>
                            </div><!-- .End .tab-pane -->

                           

                        <div class="card" style="width: 70vw; height: 30vh;">
                            <p class="card-title text-dark" style="font-size: xx-large;">Referral Code
                            </p>
                            <div class="card-body">
                                <p style="font-size: xx-large;"> <%=User.referralCode%> </p>
                                <button class="copy-coupon-btn btn btn-outline-2 " data-coupon="<%=User.referralCode %>">

                                    <span class="" style="font-size: medium;"><i class="fas fa-copy" ></i> Copy</span>
                                </button>
                            </div>
                            <a href="http://localhost:3000/register?referralCode=HUV1N3" id="inviteLink">Invite and Earn</a>

                        </div>

                            

                        </div>
                    </div><!-- End .col-lg-9 -->
                </div><!-- End .row -->
            </div><!-- End .container -->
        </div><!-- End .dashboard -->
    </div><!-- End .page-content -->

</main><!-- End .main -->
<script>
    // Function to copy text to clipboard
    function copyToClipboard(text) {
      const textarea = document.createElement('textarea');
      textarea.value = text;
      document.body.appendChild(textarea);
      textarea.select();
      document.execCommand('copy');
      document.body.removeChild(textarea);
    }

    // Function to handle link click
    function handleLinkClick(event) {
      event.preventDefault();

      const referralLink = event.target.href;
      
      // Copy the referral link to the clipboard
      copyToClipboard(referralLink);

      // Display SweetAlert
      Swal.fire({
        icon: 'success',
        title: 'Referral Link Copied!',
        background: '#ffffff', // Set the background color to white
        customClass: {
          popup: 'white-background', // Add a custom class for additional styling
        },
        text: 'You can now share your referral link.',
      });
    }

    // Add click event listener to the link
    document.getElementById('inviteLink').addEventListener('click', handleLinkClick);
  </script>
<script>
    // Add event listener to copy coupon code
    document.querySelectorAll('.copy-coupon-btn').forEach(function (button) {
        button.addEventListener('click', function () {
            const couponCode = this.dataset.coupon;
            copyToClipboard(couponCode);
        });
    });

    // Function to copy text to clipboard
    function copyToClipboard(text) {
        navigator.clipboard.writeText(text).then(function () {
            Swal.fire({
            title: 'Code Copied',
            text: 'Referral code copied',
            background: '#ffffff', // Set the background color to white
        customClass: {
          popup: 'white-background', // Add a custom class for additional styling
        },
            icon: 'success',
        });                                    }).catch(function (err) {
            console.error('Unable to copy to clipboard', err);
        });
    }
</script>

<%- include('../Layouts/footer.ejs') %>